<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8"> <!-- gere les caracteres speciauxs -->
    <title>Inscription</title>
    <script src="../assets/js/auth.js"></script>
    <script src="../assets/js/api.js"></script>
</head>

<body>
    <header>
      <h1>Connectez vous : </h1>
    </header>
  
    <main>
        <form id="login-form">
            <input type="text" id="username" placeholder="Nom d'utilisateur" required />
            <input type="password" id="password" placeholder="Mot de passe" required />
            <button>login</button>
        </form>
    </main>
    <p id="msg"></p>

    <script>
         
         const form = document.getElementById("login-form");
         const username = document.getElementById("username");
         const password = document.getElementById("password");
         const msg = document.getElementById("msg");
         form.onsubmit = async (e) => {

          e.preventDefault(); // Empêche le rechargement de la page
          const res = await login(username.value, password.value); // Appelle la fonction register
          msg.textContent = res.message; // Affiche le message de retour (succès ou erreur)
          if (res.success) {
            alert(`OKKKK : ${username.value}`);

            location.href = "../index.html"; // Redirige vers la page du jeu si connexion réussie
          } else {
            alert("Erreur de connexion");
          }
        };
      </script> 

</body>
</html>